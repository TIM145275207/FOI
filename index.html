<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FOI - FBI RP</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #0b0c10, #1f2833);
      color: #c5c6c7;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 30px;
      background-image: url("SZCCG1i-Photoroom.png"); /* logo FBI en fond */
      background-repeat: no-repeat;
      background-position: center;
      background-size: 400px;
    }

    h1 {
      color: #66fcf1;
      font-size: 3em;
      text-shadow: 0 0 10px #45a29e;
      margin-bottom: 30px;
    }

    nav {
      margin-bottom: 20px;
    }

    nav button {
      background: #45a29e;
      color: #0b0c10;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      margin: 0 5px;
      cursor: pointer;
      font-weight: bold;
    }

    nav button:hover {
      background: #66fcf1;
    }

    section {
      display: none;
      width: 100%;
      max-width: 700px;
    }

    section.active {
      display: block;
    }

    form {
      background: #1f2833;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 20px #45a29e;
      margin-bottom: 20px;
      width: 100%;
    }

    input, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 12px;
      border-radius: 10px;
      border: none;
      outline: none;
      font-size: 1em;
    }

    input[type="submit"] {
      background: #45a29e;
      color: #0b0c10;
      font-weight: bold;
      cursor: pointer;
    }

    input[type="submit"]:hover {
      background: #66fcf1;
    }

    #search {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border-radius: 10px;
      border: none;
      outline: none;
      font-size: 1em;
      box-shadow: 0 0 10px #45a29e;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      background: #1f2833;
      margin-bottom: 10px;
      padding: 12px;
      border-radius: 12px;
      box-shadow: 0 0 12px #45a29e;
      cursor: pointer;
    }

    li:hover {
      background: #0b0c10;
    }

    /* Modale Voir Plus */
    .modal {
      position: fixed;
      top:0; left:0;
      width:100%; height:100%;
      background: rgba(0,0,0,0.8);
      display:none;
      justify-content:center;
      align-items:center;
    }

    .modal-content {
      background:#1f2833;
      padding:20px;
      border-radius:12px;
      text-align:center;
      position:relative;
      color:white;
      max-width:400px;
    }

    .modal-content img {
      width:150px; height:150px;
      object-fit:cover;
      border-radius:50%;
      margin-bottom:15px;
    }

    .close {
      position:absolute;
      top:10px;
      right:15px;
      font-size:20px;
      color:red;
      cursor:pointer;
    }

    /* === Snake overlay === */
    #snake-overlay .modal-content {
      background:#0b0c10;
    }

    #snake-game {
      border:2px solid #45a29e;
      background:#1f2833;
    }
  </style>
</head>
<body>

  <h1>FOI - FBI RP</h1>

  <nav>
    <button onclick="showSection('criminels')">Criminels</button>
    <button onclick="showSection('plaques')">Plaques</button>
  </nav>

  <!-- Section Criminels -->
  <section id="criminels" class="active">
    <form id="fbiForm">
      <input type="text" placeholder="Nom" required id="nom">
      <input type="text" placeholder="Pr√©nom" required id="prenom">
      <input type="number" placeholder="√Çge" required id="age">
      <input type="text" placeholder="Crime" required id="crime">
      <input type="file" id="photo" accept="image/*">
      <textarea placeholder="Autres infos" id="autres"></textarea>
      <input type="submit" value="Ajouter">
    </form>
    <input type="text" id="search" placeholder="Rechercher...">
    <ul id="liste"></ul>
  </section>

  <!-- Section Plaques -->
  <section id="plaques">
    <form id="plaqueForm">
      <input type="text" placeholder="Plaque d'immatriculation" required id="plaque">
      <input type="text" placeholder="Propri√©taire" required id="proprio">
      <input type="submit" value="Ajouter">
    </form>
    <ul id="listePlaques"></ul>
  </section>

  <!-- Modal Voir Plus -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <img id="modalImg" src="">
      <h3 id="modalNom"></h3>
      <p id="modalAge"></p>
      <p id="modalCrime"></p>
      <p id="modalAutres"></p>
    </div>
  </div>

  <!-- Snake Easter Egg -->
  <div id="snake-overlay" class="modal">
    <div class="modal-content">
      <button id="close-snake" style="position:absolute; top:10px; right:10px; background:red; color:white; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer;">√ó</button>
      <h2 style="color:#66fcf1;">üêç Snake Game</h2>
      <canvas id="snake-game" width="400" height="400"></canvas>
      <p id="snake-score">Score : 0</p>
      <div style="margin-top:10px;">
        <button id="restart-snake" style="background:#3b82f6; color:white; border:none; padding:8px 16px; border-radius:8px; cursor:pointer; margin-right:10px;">üîÑ Recommencer</button>
        <button id="pause-snake" style="background:#45a29e; color:white; border:none; padding:8px 16px; border-radius:8px; cursor:pointer;">‚è∏ Pause</button>
      </div>
    </div>
  </div>

  <script>
    // === Gestion des sections ===
    function showSection(id) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    // === Criminels ===
    let personnes = [];
    const form = document.getElementById('fbiForm');
    const liste = document.getElementById('liste');
    const search = document.getElementById('search');

    form.addEventListener('submit', e => {
      e.preventDefault();
      const reader = new FileReader();
      const file = document.getElementById('photo').files[0];
      const personne = {
        nom: document.getElementById('nom').value.trim(),
        prenom: document.getElementById('prenom').value.trim(),
        age: document.getElementById('age').value,
        crime: document.getElementById('crime').value.trim(),
        autres: document.getElementById('autres').value.trim(),
        photo: file ? URL.createObjectURL(file) : "https://via.placeholder.com/150"
      };
      personnes.push(personne);
      personnes.sort((a,b)=>a.nom.localeCompare(b.nom));
      displayList(personnes);
      form.reset();
    });

    function displayList(list) {
      liste.innerHTML = '';
      list.forEach(p => {
        const li = document.createElement('li');
        li.textContent = `${p.nom} ${p.prenom} - ${p.age} ans`;
        li.onclick = ()=>openModal(p);
        liste.appendChild(li);
      });
    }

    search.addEventListener('input', () => {
      const val = search.value.toLowerCase();
      const filtered = personnes.filter(p =>
        p.nom.toLowerCase().includes(val) ||
        p.prenom.toLowerCase().includes(val) ||
        p.crime.toLowerCase().includes(val)
      );
      displayList(filtered);
    });

    // === Modal criminel ===
    const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const modalImg = document.getElementById("modalImg");
    const modalNom = document.getElementById("modalNom");
    const modalAge = document.getElementById("modalAge");
    const modalCrime = document.getElementById("modalCrime");
    const modalAutres = document.getElementById("modalAutres");

    function openModal(personne) {
      modalImg.src = personne.photo;
      modalNom.textContent = `${personne.nom} ${personne.prenom}`;
      modalAge.textContent = `√Çge : ${personne.age} ans`;
      modalCrime.textContent = `Crime : ${personne.crime}`;
      modalAutres.textContent = personne.autres ? `Infos : ${personne.autres}` : '';
      modal.style.display = "flex";
    }

    closeModal.onclick = () => modal.style.display="none";

    // === Plaques ===
    let plaques = [];
    const plaqueForm = document.getElementById("plaqueForm");
    const listePlaques = document.getElementById("listePlaques");

    plaqueForm.addEventListener("submit", e=>{
      e.preventDefault();
      const plaque = document.getElementById("plaque").value.trim();
      const proprio = document.getElementById("proprio").value.trim();
      const proprietaire = personnes.find(p=> (p.nom+" "+p.prenom).toLowerCase()===proprio.toLowerCase());
      plaques.push({plaque, proprio, lien: proprietaire||null});
      displayPlaques();
      plaqueForm.reset();
    });

    function displayPlaques() {
      listePlaques.innerHTML='';
      plaques.forEach(pl=>{
        const li=document.createElement("li");
        li.textContent=`${pl.plaque} - ${pl.proprio}`;
        if(pl.lien){
          li.style.color="#66fcf1";
          li.onclick=()=>openModal(pl.lien);
        }
        listePlaques.appendChild(li);
      });
    }

    // === Snake Game ===
    const snakeOverlay = document.getElementById("snake-overlay");
    const closeSnake = document.getElementById("close-snake");
    const canvasSnake = document.getElementById("snake-game");
    const ctx = canvasSnake.getContext("2d");
    const scoreDisplay = document.getElementById("snake-score");
    const restartBtn = document.getElementById("restart-snake");
    const pauseBtn = document.getElementById("pause-snake");

    let snake, dx, dy, food, score, gameInterval, paused=false;

    function initSnake(){
      snake=[{x:200,y:200}];
      dx=20; dy=0;
      food=spawnFood();
      score=0;
      scoreDisplay.textContent="Score : 0";
    }

    function spawnFood(){
      return {
        x: Math.floor(Math.random()*20)*20,
        y: Math.floor(Math.random()*20)*20
      };
    }

    function drawSnake(){
      ctx.fillStyle="#66fcf1";
      snake.forEach(p=>ctx.fillRect(p.x,p.y,20,20));
    }

    function drawFood(){
      ctx.fillStyle="red";
      ctx.fillRect(food.x,food.y,20,20);
    }

    function moveSnake(){
      const head={x:snake[0].x+dx,y:snake[0].y+dy};
      snake.unshift(head);
      if(head.x===food.x && head.y===food.y){
        score++;
        scoreDisplay.textContent="Score : "+score;
        food=spawnFood();
      } else {
        snake.pop();
      }
    }

    function checkCollision(){
      const head=snake[0];
      if(head.x<0||head.x>=400||head.y<0||head.y>=400) return true;
      for(let i=1;i<snake.length;i++){
        if(head.x===snake[i].x && head.y===snake[i].y) return true;
      }
      return false;
    }

    function gameLoop(){
      if(paused) return;
      ctx.clearRect(0,0,400,400);
      moveSnake();
      drawFood();
      drawSnake();
      if(checkCollision()){
        clearInterval(gameInterval);
        alert("Game Over ! Score : "+score);
      }
    }

    function startGame(){
      clearInterval(gameInterval);
      initSnake();
      gameInterval=setInterval(gameLoop,150);
    }

    // Touches clavier
    document.addEventListener("keydown",e=>{
      if(e.key==="ArrowUp" && dy===0){dx=0;dy=-20;}
      else if(e.key==="ArrowDown" && dy===0){dx=0;dy=20;}
      else if(e.key==="ArrowLeft" && dx===0){dx=-20;dy=0;}
      else if(e.key==="ArrowRight" && dx===0){dx=20;dy=0;}
    });

    // Boutons
    restartBtn.onclick=()=>startGame();
    pauseBtn.onclick=()=>{
      paused=!paused;
      pauseBtn.textContent=paused?"‚ñ∂ Reprendre":"‚è∏ Pause";
    };

    // Ouvrir / fermer
    closeSnake.onclick=()=>{
      snakeOverlay.style.display="none";
      clearInterval(gameInterval);
    };

    // üî• Easter egg : cliquer sur le titre ouvre Snake
    document.querySelector("h1").addEventListener("dblclick",()=>{
      snakeOverlay.style.display="flex";
      startGame();
    });
  </script>
</body>
</html>


closeSnake.addEventListener('click', ()=>{
  snakeOverlay.style.display='none';
  clearInterval(gameInterval);
});

function placeFood(){ food.x=Math.floor(Math.random()*(canvasSnake.width/20))*20; food.y=Math.floor(Math.random()*(canvasSnake.height/20))*20; }

function drawSnake(){
  ctxSnake.fillStyle='#1f2833'; ctxSnake.fillRect(0,0,canvasSnake.width,canvasSnake.height);
  ctxSnake.fillStyle='#66fcf1'; ctxSnake.fillRect(food.x,food.y,20,20);
  snake.forEach((seg,i)=>{ctxSnake.fillStyle=i===0?'#3b82f6':'#45a29e'; ctxSnake.fillRect(seg.x,seg.y,18,18);});
}

function updateSnake(){
  const head={x:snake[0].x+dx,y:snake[0].y+dy};
  if(head.x<0||head.x>=canvasSnake.width||head.y<0||head.y>=canvasSnake.height||snake.some(seg=>seg.x===head.x && seg.y===head.y)){
    alert("Game Over! Score: "+score);
    snake=[{x:200,y:200}]; dx=20; dy=0; score=0; placeFood(); return;
  }
  snake.unshift(head);
  if(head.x===food.x && head.y===food.y){ score++; placeFood(); } else { snake.pop(); }
  drawSnake();
}

function startSnake(){ snake=[{x:200,y:200}]; dx=20; dy=0; score=0; placeFood(); gameInterval=setInterval(updateSnake,100); }

document.addEventListener('keydown', (e)=>{
  switch(e.key){
    case 'ArrowUp': if(dy===0){dx=0; dy=-20;} break;
    case 'ArrowDown': if(dy===0){dx=0; dy=20;} break;
    case 'ArrowLeft': if(dx===0){dx=-20; dy=0;} break;
    case 'ArrowRight': if(dx===0){dx=20; dy=0;} break;
  }
});
</script>
</div>
</body>
</html>
