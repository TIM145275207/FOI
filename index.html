<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOI - FBI RP</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

body {
  font-family: 'Roboto', sans-serif;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  background: url('SZCCG1i-Photoroom.png') no-repeat center center fixed;
  background-size: cover;
  color: #fff;
}

.container {
  max-width: 800px;
  width: 100%;
  padding: 30px;
  background: rgba(15,15,15,0.8);
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.5);
}

h1 {
  text-align: center;
  margin-bottom: 20px;
  color: #f1f1f1;
  text-shadow: 0 0 10px #000;
}

/* Onglets */
.tabs {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
}

.tab-button {
  background: rgba(255,255,255,0.2);
  border: none;
  padding: 10px 20px;
  margin: 0 5px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  color: #fff;
  transition: 0.3s;
}

.tab-button.active {
  background: #3b82f6;
}

.tab-button:hover {
  background: #60a5fa;
}

/* Formulaires et listes */
form {
  background: rgba(0,0,0,0.6);
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 20px;
}

form input, form textarea {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: none;
  outline: none;
  font-size: 1em;
}

form input[type="submit"] {
  background: #3b82f6;
  color: #fff;
  font-weight: bold;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}

form input[type="submit"]:hover {
  background: #2563eb;
}

#search, #searchPlaques {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: none;
  outline: none;
  font-size: 1em;
}

ul {
  list-style: none;
  padding: 0;
}

li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(255,255,255,0.1);
  margin-bottom: 12px;
  padding: 12px;
  border-radius: 12px;
}

.detenu-info {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.detenu-info img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin-right: 15px;
  object-fit: cover;
  border: 2px solid #3b82f6;
}

button.supprimer {
  background: #ef4444;
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  color: #fff;
}

button.supprimer:hover {
  background: #dc2626;
}

/* Modale */
#modal {
  display: none;
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.7);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

#modal-content {
  background:#111;
  padding:25px;
  border-radius:15px;
  width:320px;
  text-align:center;
  position:relative;
}

#modal-content img {
  width:120px;
  height:120px;
  border-radius:50%;
  margin-bottom:10px;
  object-fit: cover;
  border:3px solid #3b82f6;
}

#close {
  position:absolute;
  top:10px;
  right:15px;
  cursor:pointer;
  font-size:22px;
  color:#ef4444;
}

/* Contenus onglets */
.tab-content {
  display: none;
}
.tab-content.active {
  display: block;
}
</style>
</head>
<body>

<div class="container">
<h1>FOI - FBI RP</h1>

<div class="tabs">
  <button class="tab-button active" data-tab="detenus">Détenus</button>
  <button class="tab-button" data-tab="plaques">Plaques</button>
</div>

<!-- Détenus -->
<div id="detenus" class="tab-content active">
<form id="fbiForm">
  <input type="text" placeholder="Nom" required id="nom">
  <input type="text" placeholder="Prénom" required id="prenom">
  <input type="number" placeholder="Âge" required id="age">
  <input type="text" placeholder="Crime" required id="crime">
  <textarea placeholder="Autres infos" id="autres"></textarea>
  <input type="text" placeholder="URL de la photo" id="photo">
  <input type="submit" value="Ajouter">
</form>
<input type="text" id="search" placeholder="Rechercher...">
<ul id="liste"></ul>
</div>

<!-- Plaques -->
<div id="plaques" class="tab-content">
<form id="plaqueForm">
  <input type="text" placeholder="Numéro de plaque" required id="numero">
  <input type="text" placeholder="Propriétaire" required id="proprietaire">
  <input type="submit" value="Ajouter">
</form>
<input type="text" id="searchPlaques" placeholder="Rechercher...">
<ul id="listePlaques"></ul>
</div>

<!-- Modale -->
<div id="modal">
  <div id="modal-content">
    <span id="close">&times;</span>
    <img id="modal-img" src="">
    <h3 id="modal-nom"></h3>
    <p id="modal-age"></p>
    <p id="modal-crime"></p>
    <p id="modal-autres"></p>
  </div>
</div>

<script>
const avatarParDefaut = 'https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_placeholder.png';

// Onglets
const tabButtons = document.querySelectorAll('.tab-button');
const tabContents = document.querySelectorAll('.tab-content');
tabButtons.forEach(button=>{
  button.addEventListener('click', ()=>{
    tabButtons.forEach(b=>b.classList.remove('active'));
    tabContents.forEach(c=>c.classList.remove('active'));
    button.classList.add('active');
    document.getElementById(button.dataset.tab).classList.add('active');
  });
});

// Détenus
let personnes = [];
const liste = document.getElementById('liste');
const search = document.getElementById('search');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modal-img');
const modalNom = document.getElementById('modal-nom');
const modalAge = document.getElementById('modal-age');
const modalCrime = document.getElementById('modal-crime');
const modalAutres = document.getElementById('modal-autres');
const closeBtn = document.getElementById('close');
const form = document.getElementById('fbiForm');

if(localStorage.getItem('personnes')){
  personnes = JSON.parse(localStorage.getItem('personnes'));
  displayList(personnes);
}

form.addEventListener('submit', e=>{
  e.preventDefault();
  const personne = {
    nom: document.getElementById('nom').value.trim(),
    prenom: document.getElementById('prenom').value.trim(),
    age: document.getElementById('age').value,
    crime: document.getElementById('crime').value.trim(),
    autres: document.getElementById('autres').value.trim(),
    photo: document.getElementById('photo').value.trim() || avatarParDefaut
  };
  personnes.push(personne);
  personnes.sort((a,b)=>a.nom.localeCompare(b.nom));
  saveAndDisplay();
  form.reset();
});

function displayList(list){
  liste.innerHTML='';
  list.forEach((p,index)=>{
    const li=document.createElement('li');
    const infoDiv=document.createElement('div');
    infoDiv.className='detenu-info';
    const img=document.createElement('img');
    img.src=p.photo || avatarParDefaut;
    img.addEventListener('click',()=>openModal(p));
    const text=document.createElement('span');
    text.textContent=`${p.nom} ${p.prenom} - ${p.age} ans - Crime: ${p.crime}${p.autres?' - '+p.autres:''}`;
    text.addEventListener('click',()=>openModal(p));
    infoDiv.appendChild(img);
    infoDiv.appendChild(text);
    li.appendChild(infoDiv);
    const btn=document.createElement('button');
    btn.textContent='Supprimer';
    btn.className='supprimer';
    btn.addEventListener('click',()=>{
      personnes.splice(index,1);
      saveAndDisplay();
    });
    li.appendChild(btn);
    liste.appendChild(li);
  });
}

search.addEventListener('input', ()=>{
  const value=search.value.toLowerCase();
  const filtered=personnes.filter(p=>
    p.nom.toLowerCase().includes(value)||
    p.prenom.toLowerCase().includes(value)||
    p.crime.toLowerCase().includes(value)
  );
  displayList(filtered);
});

function saveAndDisplay(){
  localStorage.setItem('personnes',JSON.stringify(personnes));
  displayList(personnes);
}

// Modale
function openModal(personne){
  modalImg.src=personne.photo || avatarParDefaut;
  modalNom.textContent=`${personne.nom} ${personne.prenom}`;
  modalAge.textContent=`Âge : ${personne.age} ans`;
  modalCrime.textContent=`Crime : ${personne.crime}`;
  modalAutres.textContent=personne.autres?`Infos : ${personne.autres}`:'';
  modal.style.display='flex';
}

closeBtn.addEventListener('click', ()=>modal.style.display='none');
window.addEventListener('click', e=>{if(e.target===modal) modal.style.display='none';});

// Plaques
let plaques = [];
const listePlaques = document.getElementById('listePlaques');
const searchPlaques = document.getElementById('searchPlaques');
const plaqueForm = document.getElementById('plaqueForm');

if(localStorage.getItem('plaques')){
  plaques = JSON.parse(localStorage.getItem('plaques'));
  displayPlaques(plaques);
}

plaqueForm.addEventListener('submit', e=>{
  e.preventDefault();
  const numero = document.getElementById('numero').value.trim();
  const proprietaire = document.getElementById('proprietaire').value.trim();

  const plaque = { numero, proprietaire };

  const detenu = personnes.find(p =>
    (p.nom + ' ' + p.prenom).toLowerCase() === proprietaire.toLowerCase()
  );
  if(detenu){
    plaque.detenuAssocie = detenu;
  }

  plaques.push(plaque);
  plaques.sort((a,b)=>a.numero.localeCompare(b.numero));
  saveAndDisplayPlaques();
  plaqueForm.reset();
});

function displayPlaques(list){
  listePlaques.innerHTML='';
  list.forEach((p,index)=>{
    const li = document.createElement('li');
    li.textContent = `${p.numero} - ${p.proprietaire}`;
    
    if(p.detenuAssocie){
      const span = document.createElement('span');
      span.textContent = ' (Détenu enregistré)';
      span.style.color = '#3b82f6';
      span.style.cursor = 'pointer';
      span.addEventListener('click', ()=>{
        tabButtons.forEach(b=>b.classList.remove('active'));
        tabContents.forEach(c=>c.classList.remove('active'));
        document.querySelector('[data-tab="detenus"]').classList.add('active');
        document.getElementById('detenus').classList.add('active');
        openModal(p.detenuAssocie);
      });
      li.appendChild(span);
    }

    const btn=document.createElement('button');
    btn.textContent='Supprimer';
    btn.className='supprimer';
    btn.addEventListener('click', ()=>{
      plaques.splice(index,1);
      saveAndDisplayPlaques();
    });
    li.appendChild(btn);
    listePlaques.appendChild(li);
  });
}

searchPlaques.addEventListener('input', ()=>{
  const value=searchPlaques.value.toLowerCase();
  const filtered=plaques.filter(p=>
    p.numero.toLowerCase().includes(value)||
    p.proprietaire.toLowerCase().includes(value)
  );
  displayPlaques(filtered);
});

function saveAndDisplayPlaques(){
  localStorage.setItem('plaques',JSON.stringify(plaques));
  displayPlaques(plaques);
}
</script>
</body>
</html>






