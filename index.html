<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOI - FBI RP</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

body {
  font-family: 'Roboto', sans-serif;
  background: #f5f7fa;
  color: #333;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
}

.container {
  max-width: 800px;
  width: 100%;
  padding: 30px;
}

h1 {
  text-align: center;
  color: #1f2937;
  margin-bottom: 30px;
}

form {
  background: #fff;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  margin-bottom: 30px;
}

form input, form textarea {
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 1em;
}

form input[type="submit"] {
  background: #3b82f6;
  color: #fff;
  font-weight: bold;
  border: none;
  cursor: pointer;
  transition: 0.3s;
}

form input[type="submit"]:hover {
  background: #2563eb;
}

#search {
  width: 100%;
  padding: 10px;
  margin-bottom: 20px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 1em;
}

ul {
  list-style: none;
  padding: 0;
}

li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #fff;
  margin-bottom: 15px;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  transition: transform 0.2s, box-shadow 0.2s;
}

li:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
}

.detenu-info {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.detenu-info img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin-right: 15px;
  object-fit: cover;
  border: 2px solid #3b82f6;
}

button.supprimer {
  background: #ef4444;
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  cursor: pointer;
  color: #fff;
}

button.supprimer:hover {
  background: #dc2626;
}

/* Modale */
#modal {
  display: none;
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

#modal-content {
  background:#fff;
  padding:25px;
  border-radius:15px;
  width:320px;
  text-align:center;
  position:relative;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
}

#modal-content img {
  width:120px;
  height:120px;
  border-radius:50%;
  margin-bottom:10px;
  object-fit: cover;
  border:3px solid #3b82f6;
}

#close {
  position:absolute;
  top:10px;
  right:15px;
  cursor:pointer;
  font-size:22px;
  color:#ef4444;
}
</style>
</head>
<body>

<div class="container">
<h1>FOI - FBI RP</h1>

<form id="fbiForm">
  <input type="text" placeholder="Nom" required id="nom">
  <input type="text" placeholder="Prénom" required id="prenom">
  <input type="number" placeholder="Âge" required id="age">
  <input type="text" placeholder="Crime" required id="crime">
  <textarea placeholder="Autres infos" id="autres"></textarea>
  <input type="text" placeholder="URL de la photo" id="photo">
  <input type="submit" value="Ajouter">
</form>

<input type="text" id="search" placeholder="Rechercher...">

<ul id="liste"></ul>
</div>

<!-- Modale -->
<div id="modal">
  <div id="modal-content">
    <span id="close">&times;</span>
    <img id="modal-img" src="">
    <h3 id="modal-nom"></h3>
    <p id="modal-age"></p>
    <p id="modal-crime"></p>
    <p id="modal-autres"></p>
  </div>
</div>

<script>
let personnes = [];

const liste = document.getElementById('liste');
const search = document.getElementById('search');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modal-img');
const modalNom = document.getElementById('modal-nom');
const modalAge = document.getElementById('modal-age');
const modalCrime = document.getElementById('modal-crime');
const modalAutres = document.getElementById('modal-autres');
const closeBtn = document.getElementById('close');
const form = document.getElementById('fbiForm');

// Charger depuis localStorage
if(localStorage.getItem('personnes')) {
  personnes = JSON.parse(localStorage.getItem('personnes'));
  displayList(personnes);
}

// Ajouter détenu
form.addEventListener('submit', e => {
  e.preventDefault();
  const personne = {
    nom: document.getElementById('nom').value.trim(),
    prenom: document.getElementById('prenom').value.trim(),
    age: document.getElementById('age').value,
    crime: document.getElementById('crime').value.trim(),
    autres: document.getElementById('autres').value.trim(),
    photo: document.getElementById('photo').value.trim() || 'https://via.placeholder.com/60'
  };
  personnes.push(personne);
  personnes.sort((a,b)=>a.nom.localeCompare(b.nom));
  saveAndDisplay();
  form.reset();
});

// Afficher liste
function displayList(list) {
  liste.innerHTML = '';
  list.forEach((p,index)=>{
    const li = document.createElement('li');

    const infoDiv = document.createElement('div');
    infoDiv.className='detenu-info';

    const img = document.createElement('img');
    img.src=p.photo;
    img.addEventListener('click',()=>openModal(p));

    const text = document.createElement('span');
    text.textContent=`${p.nom} ${p.prenom} - ${p.age} ans - Crime: ${p.crime}${p.autres?' - '+p.autres:''}`;
    text.addEventListener('click',()=>openModal(p));

    infoDiv.appendChild(img);
    infoDiv.appendChild(text);
    li.appendChild(infoDiv);

    const btn = document.createElement('button');
    btn.textContent='Supprimer';
    btn.className='supprimer';
    btn.addEventListener('click',()=>{
      personnes.splice(index,1);
      saveAndDisplay();
    });

    li.appendChild(btn);
    liste.appendChild(li);
  });
}

// Recherche
search.addEventListener('input',()=>{
  const value = search.value.toLowerCase();
  const filtered = personnes.filter(p=>
    p.nom.toLowerCase().includes(value)||
    p.prenom.toLowerCase().includes(value)||
    p.crime.toLowerCase().includes(value)
  );
  displayList(filtered);
});

// Sauvegarder et afficher
function saveAndDisplay(){
  localStorage.setItem('personnes',JSON.stringify(personnes));
  displayList(personnes);
}

// Modale
function openModal(personne){
  modalImg.src=personne.photo;
  modalNom.textContent=`${personne.nom} ${personne.prenom}`;
  modalAge.textContent=`Âge : ${personne.age} ans`;
  modalCrime.textContent=`Crime : ${personne.crime}`;
  modalAutres.textContent=personne.autres?`Infos : ${personne.autres}`:'';
  modal.style.display='flex';
}

closeBtn.addEventListener('click',()=>modal.style.display='none');
window.addEventListener('click', e=>{if(e.target===modal) modal.style.display='none';});
</script>

</body>
</html>



